<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Building Base Case Operating Models • SAMSE</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Building Base Case Operating Models">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SAMSE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9006</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Building-Base-Case-Operating-Models.html">Building Base Case Operating Models</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Building Base Case Operating Models</h1>
            
      

      <div class="d-none name"><code>Building-Base-Case-Operating-Models.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://safmc-mse.bluematterscience.com">SAMSE</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2" number="1">
<h2 id="introduction">
<span class="header-section-number">1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This article describes the process to import output from the Beaufort Assessment Model (BAM) and create the Base Case multi-species and multi-fleet operating models (OMs) used by the <a href="https://openMSE.com" class="external-link">openMSE</a> framework.</p>
<div class="section level3" number="1.1">
<h3 id="prerequistes">
<span class="header-section-number">1.1</span> Prerequistes<a class="anchor" aria-label="anchor" href="#prerequistes"></a>
</h3>
<p>The latest development versions of <code>MSEtool</code> and <code>bamExtras</code> need to be installed from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages('pak')</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">'nikolaifish/bamExtras'</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">'blue-matter/MSEtool'</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2" number="2">
<h2 id="om-specifications">
<span class="header-section-number">2</span> OM Specifications<a class="anchor" aria-label="anchor" href="#om-specifications"></a>
</h2>
<p>The number of simulations (<code>nsim</code>) and number of projection years (<code>proyears</code>) need to be specified for an OM. Here we are setting them as global variables so that each OM we create has the same number of stochastic simulations and projection years:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nsim</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="co"># number of simulations</span></span>
<span><span class="va">proyears</span> <span class="op">&lt;-</span> <span class="fl">25</span> <span class="co"># number of projection years</span></span></code></pre></div>
<p>An OM also requires the specification of an Observation Model. The Observation Model is used to simulate fishery data to be used be management procedures in the projection phase of the closed-loop simulation testing.</p>
<p>We are using <code>Perfect_Info</code> as the fishery data are not currently used within the management options (only static management options are currently being explored). This can be changed later if dynamic management options that respond to the observed fishery data are added to the analysis.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Obs_Model</span> <span class="op">&lt;-</span> <span class="fu">MSEtool</span><span class="fu">::</span><span class="va"><a href="https://msetool.openmse.com/reference/Obs-class-objects.html" class="external-link">Perfect_Info</a></span></span></code></pre></div>
</div>
<div class="section level2" number="3">
<h2 id="case-study-stocks">
<span class="header-section-number">3</span> Case Study Stocks<a class="anchor" aria-label="anchor" href="#case-study-stocks"></a>
</h2>
<p>The current analysis is focused on three stocks: red snapper <em>Lutjanus campechanus</em>, gag grouper <em>Mycteroperca microlepis</em>, and black seabass <em>Centropristis striata</em>. The MSE framework is flexible, and more stocks can be added to the analysis following the same process used here.</p>
<p>Here we demonstrate creating OMs for the three case study stocks.</p>
<p>The most recent BAM assessments are used:</p>
<ol style="list-style-type: decimal">
<li>Red snapper: <a href="https://sedarweb.org/documents/sedar-73-stock-assessment-report-south-atlantic-red-snapper/" class="external-link">SEDAR 73</a>
</li>
<li>Gag grouper: <a href="https://sedarweb.org/documents/sedar-71-stock-assessment-report-south-atlantic-gag/" class="external-link">SEDAR 71</a>
</li>
<li>Black seabass: <a href="https://sedarweb.org/documents/sedar-76-stock-assessment-report-south-atlantic-black-sea-bass/" class="external-link">SEDAR 76</a>
</li>
</ol>
</div>
<div class="section level2" number="4">
<h2 id="import-sedar-assessments">
<span class="header-section-number">4</span> Import SEDAR Assessments<a class="anchor" aria-label="anchor" href="#import-sedar-assessments"></a>
</h2>
<p>The BAM assessments are imported from the <code>bamExtras</code> package:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rdat_RS</span> <span class="op">&lt;-</span> <span class="fu">bamExtras</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/bamExtras/man/rdat_RedSnapper.html" class="external-link">rdat_RedSnapper</a></span> <span class="op">|&gt;</span> <span class="fu">bamExtras</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bamExtras/man/standardize_rdat.html" class="external-link">standardize_rdat</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">rdat_GG</span> <span class="op">&lt;-</span> <span class="fu">bamExtras</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/bamExtras/man/rdat_GagGrouper.html" class="external-link">rdat_GagGrouper</a></span> <span class="op">|&gt;</span> <span class="fu">bamExtras</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bamExtras/man/standardize_rdat.html" class="external-link">standardize_rdat</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">rdat_BS</span> <span class="op">&lt;-</span> <span class="fu">bamExtras</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/bamExtras/man/rdat_BlackSeaBass.html" class="external-link">rdat_BlackSeaBass</a></span> <span class="op">|&gt;</span> <span class="fu">bamExtras</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bamExtras/man/standardize_rdat.html" class="external-link">standardize_rdat</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2" number="5">
<h2 id="create-single-stock-operating-models">
<span class="header-section-number">5</span> Create Single-Stock Operating Models<a class="anchor" aria-label="anchor" href="#create-single-stock-operating-models"></a>
</h2>
<p>The <code>BAM2MOM</code> function is used to create the <code>openMSE</code> operating model objects:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">OM_RS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://msetool.openmse.com/reference/BAM2MOM.html" class="external-link">BAM2MOM</a></span><span class="op">(</span><span class="va">rdat_RS</span>, stock_name<span class="op">=</span><span class="st">'Red Snapper'</span>,</span>
<span>                 Obs<span class="op">=</span><span class="va">Obs_Model</span>,</span>
<span>                 nsim<span class="op">=</span><span class="va">nsim</span>, proyears<span class="op">=</span><span class="va">proyears</span><span class="op">)</span></span>
<span><span class="va">OM_GG</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://msetool.openmse.com/reference/BAM2MOM.html" class="external-link">BAM2MOM</a></span><span class="op">(</span><span class="va">rdat_GG</span>, stock_name<span class="op">=</span><span class="st">'Gag Grouper'</span>,</span>
<span>                 Obs<span class="op">=</span><span class="va">Obs_Model</span>,</span>
<span>                 nsim<span class="op">=</span><span class="va">nsim</span>, proyears<span class="op">=</span><span class="va">proyears</span><span class="op">)</span></span>
<span><span class="va">OM_BS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://msetool.openmse.com/reference/BAM2MOM.html" class="external-link">BAM2MOM</a></span><span class="op">(</span><span class="va">rdat_BS</span>, stock_name<span class="op">=</span><span class="st">'Black Sea Bass'</span>,</span>
<span>                 Obs<span class="op">=</span><span class="va">Obs_Model</span>,</span>
<span>                 nsim<span class="op">=</span><span class="va">nsim</span>, proyears<span class="op">=</span><span class="va">proyears</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">rdat</span> <span class="op">=</span> <span class="va">rdat_RS</span></span></code></pre></div>
<p>These OMs could now be used within the <code>openMSE</code> framework. However, if we wish to combine the OMs into a single multi-stock OM (or model them individually under the assumption they are being managed together), we need to create a common fleet structure for all OMs.</p>
<div class="section level3" number="5.1">
<h3 id="define-fleet-structure">
<span class="header-section-number">5.1</span> Define Fleet Structure<a class="anchor" aria-label="anchor" href="#define-fleet-structure"></a>
</h3>
<p>Here we create a data frame with the names of the fleets within each OM:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fleet_names_df</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Stock<span class="op">=</span><span class="st">'Red Snapper'</span>, Fleets<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">OM_RS</span><span class="op">@</span><span class="va">Fleets</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Stock<span class="op">=</span><span class="st">'Gag Grouper'</span>, Fleets<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">OM_GG</span><span class="op">@</span><span class="va">Fleets</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Stock<span class="op">=</span><span class="st">'Black Sea Bass'</span>, Fleets<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">OM_BS</span><span class="op">@</span><span class="va">Fleets</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>In order to combine these single stock OMs together, each OM must have the same fleet structure for all
stocks in the OM, even if those fleets are not actively fishing on a particular stock.</p>
<p>The stocks have some fleets in common (e.g., Commercial hook and line (cHL)) and some unique fleets (e.g., Gag Grouper Commercial dive (cDV)). The landings and discards are also modeled as separate fleets in the BAM models (indicated by “.D”).</p>
<p>The black seabass stock has two commercial fleets (cHL and cPT), but the discards are reported for two fleets combined (cGN.D). To deal with this, the cHL and cPT landing fleets will first be combined together, before the discards are added for the combined fleet.</p>
<p>Here we create a data frame with <code>Code</code>, <code>Name</code>, <code>Mapping</code>, and <code>Type</code> for each fleet:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fleet_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Code<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">fleet_names_df</span><span class="op">$</span><span class="va">Fleets</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fleet_df</span><span class="op">$</span><span class="va">Name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Commercial Line'</span>,</span>
<span>                   <span class="st">'Recreational Headboat'</span>,</span>
<span>                   <span class="st">'General Recreational'</span>,</span>
<span>                   <span class="st">'Commercial Line - Discard'</span>,</span>
<span>                   <span class="st">'Recreational Headboat - Discard'</span>,</span>
<span>                   <span class="st">'General Recreational - Discard'</span>,</span>
<span>                   <span class="st">'Commercial Dive'</span>,</span>
<span>                   <span class="st">'Commercial Pot'</span>,</span>
<span>                   <span class="st">'Commercial General - Discard'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fleet_df</span><span class="op">$</span><span class="va">Mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">fleet_df</span><span class="op">$</span><span class="va">Type</span> <span class="op">&lt;-</span> <span class="st">'Landing'</span></span>
<span><span class="va">fleet_df</span><span class="op">$</span><span class="va">Type</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">'\\.D'</span>, <span class="va">fleet_df</span><span class="op">$</span><span class="va">Code</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">'Discard'</span></span>
<span><span class="va">fleet_df</span></span>
<span><span class="co">#&gt;    Code                            Name Mapping    Type</span></span>
<span><span class="co">#&gt; 1   cHL                 Commercial Line       1 Landing</span></span>
<span><span class="co">#&gt; 2   rHB           Recreational Headboat       2 Landing</span></span>
<span><span class="co">#&gt; 3   rGN            General Recreational       3 Landing</span></span>
<span><span class="co">#&gt; 4 cHL.D       Commercial Line - Discard       1 Discard</span></span>
<span><span class="co">#&gt; 5 rHB.D Recreational Headboat - Discard       2 Discard</span></span>
<span><span class="co">#&gt; 6 rGN.D  General Recreational - Discard       3 Discard</span></span>
<span><span class="co">#&gt; 7   cDV                 Commercial Dive       4 Landing</span></span>
<span><span class="co">#&gt; 8   cPT                  Commercial Pot       1 Landing</span></span>
<span><span class="co">#&gt; 9 cGN.D    Commercial General - Discard       1 Discard</span></span></code></pre></div>
<p><code>Code</code> is the name of the fleets within the OM objects. <code>Name</code> is the name we are associating with each <code>Code</code>. The <code>Mapping</code> variable describes how the fleets will be combined together. <code>Type</code> indicates if a fleet in the OM represents Landings or Discards.</p>
<p>The Landing and Discard components for each fleet will be combined into a single fleet with a selectivity and retention curve. This makes it easier to model changes to management such as changes to season lengths, discard mortality, or size-based retention or selectivity regulations.</p>
<p>The end result will be a fleet structure with four fleets for each stock:</p>
<ol style="list-style-type: decimal">
<li>Commercial Line</li>
<li>Recreational Headboat</li>
<li>General Recreational</li>
<li>Commercial Dive</li>
</ol>
</div>
<div class="section level3" number="5.2">
<h3 id="define-discard-mortality">
<span class="header-section-number">5.2</span> Define Discard Mortality<a class="anchor" aria-label="anchor" href="#define-discard-mortality"></a>
</h3>
<p>The discard mortality needs to be added to the OMs so that the historical effort can be adjusted to account for the fish that were caught and released alive, and so that the discard mortality can be modified in the projections.</p>
<p>The discard mortality for red dnapper is reported in Table 6 of <a href="https://sedarweb.org/documents/sedar-73-stock-assessment-report-south-atlantic-red-snapper/" class="external-link">SEDAR 73</a>. The<code>Year</code> variable indicates the first year the discard mortality changes:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">discard_mortality_RS</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Stock<span class="op">=</span><span class="st">'Red Snapper'</span>,</span>
<span>             Code<span class="op">=</span><span class="st">'cHL'</span>,</span>
<span>             Year<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1900</span>, <span class="fl">2007</span>, <span class="fl">2017</span><span class="op">)</span>,</span>
<span>             Prob_Dead<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.48</span>, <span class="fl">0.38</span>, <span class="fl">0.36</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Stock<span class="op">=</span><span class="st">'Red Snapper'</span>,</span>
<span>             Code<span class="op">=</span><span class="st">'rHB'</span>,</span>
<span>             Year<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1900</span>, <span class="fl">2011</span>, <span class="fl">2018</span><span class="op">)</span>,</span>
<span>             Prob_Dead<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.37</span>, <span class="fl">0.26</span>, <span class="fl">0.25</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Stock<span class="op">=</span><span class="st">'Red Snapper'</span>,</span>
<span>             Code<span class="op">=</span><span class="st">'rGN'</span>,</span>
<span>             Year<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1900</span>, <span class="fl">2011</span>, <span class="fl">2018</span><span class="op">)</span>,</span>
<span>             Prob_Dead<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.37</span>, <span class="fl">0.28</span>, <span class="fl">0.26</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The discard mortality for Gag Grouper is reported in <a href="https://sedarweb.org/documents/sedar-71-stock-assessment-report-south-atlantic-gag/" class="external-link">SEDAR 71</a>, with a fixed discard mortality of 0.4 for the commerical fleet, and 0.25 for the recreational fleets for all years:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">discard_mortality_GG</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Stock<span class="op">=</span><span class="st">'Gag Grouper'</span>,</span>
<span>             Code<span class="op">=</span><span class="st">'cHL'</span>,</span>
<span>             Year<span class="op">=</span><span class="fl">1900</span>,</span>
<span>             Prob_Dead<span class="op">=</span><span class="fl">0.4</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Stock<span class="op">=</span><span class="st">'Gag Grouper'</span>,</span>
<span>             Code<span class="op">=</span><span class="st">'rHB'</span>,</span>
<span>             Year<span class="op">=</span><span class="fl">1900</span>,</span>
<span>             Prob_Dead<span class="op">=</span><span class="fl">0.25</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Stock<span class="op">=</span><span class="st">'Gag Grouper'</span>,</span>
<span>             Code<span class="op">=</span><span class="st">'rGN'</span>,</span>
<span>             Year<span class="op">=</span><span class="fl">1900</span>,</span>
<span>             Prob_Dead<span class="op">=</span><span class="fl">0.25</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The discard mortality for Black Seabass is reported in Section 2.2.1 in <a href="https://sedarweb.org/documents/sedar-76-stock-assessment-report-south-atlantic-black-sea-bass/" class="external-link">SEDAR 76</a>. Here the average discard mortality is calculated for the combined commercial line and pot fleets:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">discard_mortality_BS</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Stock<span class="op">=</span><span class="st">'Black Sea Bass'</span>,</span>
<span>             Code<span class="op">=</span><span class="st">'cHL'</span>,</span>
<span>             Year<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1900</span>, <span class="fl">2007</span><span class="op">)</span>,</span>
<span>             Prob_Dead<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fl">0.14</span>,<span class="fl">0.19</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fl">0.14</span>, <span class="fl">0.068</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Stock<span class="op">=</span><span class="st">'Black Sea Bass'</span>,</span>
<span>             Code<span class="op">=</span><span class="st">'rHB'</span>,</span>
<span>             Year<span class="op">=</span><span class="fl">1900</span>,</span>
<span>             Prob_Dead<span class="op">=</span><span class="fl">0.152</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Stock<span class="op">=</span><span class="st">'Black Sea Bass'</span>,</span>
<span>             Code<span class="op">=</span><span class="st">'rGN'</span>,</span>
<span>             Year<span class="op">=</span><span class="fl">1900</span>,</span>
<span>             Prob_Dead<span class="op">=</span><span class="fl">0.137</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The stock-specific discard mortality dataframes are combined together:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">discard_mortality</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">discard_mortality_RS</span>,</span>
<span>                                      <span class="va">discard_mortality_GG</span>,</span>
<span>                                      <span class="va">discard_mortality_BS</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3" number="5.3">
<h3 id="aggregate-fleets">
<span class="header-section-number">5.3</span> Aggregate Fleets<a class="anchor" aria-label="anchor" href="#aggregate-fleets"></a>
</h3>
<p>Next, the <code>Aggregate_Fleets</code> function is used to aggregate the fleets together according to the mapping defined in <code>fleet_df</code> and the discard mortality are added from <code>discard_mortality</code>.</p>
<p>The <code>Aggregate_Fleets</code> function does five things:</p>
<ol style="list-style-type: decimal">
<li>Combine any landing fleets that are mapped together in <code>fleet_df</code> (here only applies to Black Seabass)</li>
<li>Add the discard mortality to each fleet</li>
<li>Combine the discard fleets with the landing fleets to produce a single fleet with selectivity and retention curves</li>
<li>Add dummy fleets (F=0 for all years) for OMs that are missing some fleets</li>
<li>Order the fleets for all OMs</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">OM_RS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Aggregate_Fleets.html">Aggregate_Fleets</a></span><span class="op">(</span><span class="va">OM_RS</span>, <span class="va">fleet_df</span>, <span class="va">discard_mortality</span><span class="op">)</span></span>
<span><span class="va">OM_GG</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Aggregate_Fleets.html">Aggregate_Fleets</a></span><span class="op">(</span><span class="va">OM_GG</span>, <span class="va">fleet_df</span>, <span class="va">discard_mortality</span><span class="op">)</span></span>
<span><span class="va">OM_BS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Aggregate_Fleets.html">Aggregate_Fleets</a></span><span class="op">(</span><span class="va">OM_BS</span>, <span class="va">fleet_df</span>, <span class="va">discard_mortality</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2" number="6">
<h2 id="add-spatial-structure">
<span class="header-section-number">6</span> Add Spatial Structure<a class="anchor" aria-label="anchor" href="#add-spatial-structure"></a>
</h2>
<p>The spatial structure of the MSE has been defined as 6 areas, including 3 geographic regions and a Nearshore (&lt;100ft) and Offshore (&gt;100ft) component for each region (solid and dashed black lines respectively in Figure <a href="#fig:spatialmap">6.1</a>).</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ericpante/marmap" class="external-link">marmap</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">bathy</span> <span class="op">&lt;-</span> <span class="fu">marmap</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/marmap/man/getNOAA.bathy.html" class="external-link">getNOAA.bathy</a></span><span class="op">(</span><span class="op">-</span><span class="fl">83</span>, <span class="op">-</span><span class="fl">71.37133</span>, <span class="fl">23.8</span>, <span class="fl">36.55028</span><span class="op">)</span></span>
<span></span>
<span><span class="va">numbers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Number<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,</span>
<span>                      x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">79.5</span>, <span class="op">-</span><span class="fl">77.7</span>, <span class="op">-</span><span class="fl">81</span>, <span class="op">-</span><span class="fl">80.3</span>, <span class="op">-</span><span class="fl">82</span>, <span class="op">-</span><span class="fl">80.3</span><span class="op">)</span>,</span>
<span>                      y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">33</span>, <span class="fl">33</span>, <span class="fl">30</span>, <span class="fl">30</span>, <span class="fl">25</span>, <span class="fl">25</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_raster</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">bathy</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">y</span>,fill<span class="op">=</span><span class="va">z</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">marmap</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/marmap/man/etopo.html" class="external-link">scale_fill_etopo</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>fill<span class="op">=</span><span class="st">'none'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggnewscale</span><span class="fu">::</span><span class="fu"><a href="https://eliocamp.github.io/ggnewscale/reference/new_scale.html" class="external-link">new_scale_fill</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html" class="external-link">geom_polygon</a></span><span class="op">(</span>data <span class="op">=</span>  <span class="fu"><a href="../reference/Spatial_Area_Definition.html">Spatial_Area_Definition</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>               <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">X</span>, y <span class="op">=</span> <span class="va">Y</span>, group<span class="op">=</span><span class="va">Region</span>, fill<span class="op">=</span><span class="va">Region</span><span class="op">)</span>, alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'#7fc97f'</span>, <span class="st">'#beaed4'</span>, <span class="st">'#fdc086'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_contour.html" class="external-link">geom_contour</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">bathy</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">y</span>, z<span class="op">=</span><span class="va">z</span><span class="op">)</span>, breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">30</span><span class="op">)</span>,</span>
<span>               colour<span class="op">=</span><span class="st">"black"</span>,linewidth<span class="op">=</span><span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_contour.html" class="external-link">geom_contour</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">bathy</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">y</span>, z<span class="op">=</span><span class="va">z</span><span class="op">)</span>, breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">300</span><span class="op">)</span>,</span>
<span>               colour<span class="op">=</span><span class="st">"black"</span>,linewidth<span class="op">=</span><span class="fl">0.2</span>, linetype<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">numbers</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">y</span>, label<span class="op">=</span><span class="va">Number</span><span class="op">)</span>, size<span class="op">=</span><span class="fl">5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>expand<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>expand<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">'Longitude'</span>, y<span class="op">=</span><span class="st">'Latitude'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.margin<span class="op">=</span><span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>, <span class="st">"mm"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">map</span></span></code></pre></div>
<div class="figure">
<span style="display:block;" id="fig:spatialmap"></span>
<img src="../reference/figures/spatial_map.png" alt="Definition of the spatial areas used in the MSE."><p class="caption">
Figure 6.1: Definition of the spatial areas used in the MSE.
</p>
</div>
<div class="section level3" number="6.1">
<h3 id="spatial-distribution-of-unfished-abundance">
<span class="header-section-number">6.1</span> Spatial Distribution of Unfished Abundance<a class="anchor" aria-label="anchor" href="#spatial-distribution-of-unfished-abundance"></a>
</h3>
<p>The relative abundance of the three stocks was specified using the output of a recent study that estimated the spatiotemporal dynamics of reef fish off the southeastern United States (<a href="https://esajournals.onlinelibrary.wiley.com/doi/10.1002/ecs2.4868" class="external-link">Cao et al., 2024</a>; K. Shertzer personal communication, May 2024).</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Rel_Abun_Area_RS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Area<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,</span>
<span>  Region<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'North and South Carolina'</span>,<span class="fl">2</span><span class="op">)</span>,</span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'Georgia - Cape Canaveral'</span>,<span class="fl">2</span><span class="op">)</span>,</span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'Cape Canaveral - Florida'</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Depth<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Nearshore'</span>, <span class="st">'Offshore'</span><span class="op">)</span>,</span>
<span>  Stock<span class="op">=</span><span class="st">'Red Snapper'</span>,</span>
<span>  Proportion<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.03</span>,<span class="fl">0.01</span>, <span class="fl">0.7</span>, <span class="fl">0.19</span>, <span class="fl">0.03</span>, <span class="fl">0.04</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">Rel_Abun_Area_GG</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Area<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,</span>
<span>  Region<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'North and South Carolina'</span>,<span class="fl">2</span><span class="op">)</span>,</span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'Georgia - Cape Canaveral'</span>,<span class="fl">2</span><span class="op">)</span>,</span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'Cape Canaveral - Florida'</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Depth<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Nearshore'</span>, <span class="st">'Offshore'</span><span class="op">)</span>,</span>
<span>  Stock<span class="op">=</span><span class="st">'Gag Grouper'</span>,</span>
<span>  Proportion<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.34</span>, <span class="fl">0.21</span>, <span class="fl">0.21</span>, <span class="fl">0.18</span>, <span class="fl">0.03</span>, <span class="fl">0.03</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">Rel_Abun_Area_BS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Area<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,</span>
<span>  Region<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'North and South Carolina'</span>,<span class="fl">2</span><span class="op">)</span>,</span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'Georgia - Cape Canaveral'</span>,<span class="fl">2</span><span class="op">)</span>,</span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'Cape Canaveral - Florida'</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Depth<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Nearshore'</span>, <span class="st">'Offshore'</span><span class="op">)</span>,</span>
<span>  Stock<span class="op">=</span><span class="st">'Black Seabass'</span>,</span>
<span>  Proportion<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.14</span>, <span class="fl">0.02</span>, <span class="fl">0.72</span>, <span class="fl">0.06</span>, <span class="fl">0.04</span>, <span class="fl">0.02</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3" number="6.2">
<h3 id="add-stock-spatial-structure-to-oms">
<span class="header-section-number">6.2</span> Add Stock Spatial Structure to OMs<a class="anchor" aria-label="anchor" href="#add-stock-spatial-structure-to-oms"></a>
</h3>
<p>The age-specific relative distribution of each stock across the depth zones was modeled by assuming 100%, 95%, and 80% of age-0, -1, and -2 fish respectively occurred in the nearshore region.</p>
<p>The depth distribution of age-3+ fish, as well as the relative spatial distribution of the fishing fleets, were then calculated by optimizing the age-3+ stock and the fleet-specific effort spatial distributions such that the relative distribution of the biomass across the six areas in the terminal year of the operating models closely matched the reported relative distribution from the spatiotemporal model (see above).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">OM_RS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Add_Spatial_to_OM.html">Add_Spatial_to_OM</a></span><span class="op">(</span><span class="va">OM_RS</span>, <span class="va">Rel_Abun_Area_RS</span><span class="op">)</span></span>
<span></span>
<span><span class="va">OM_GG</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Add_Spatial_to_OM.html">Add_Spatial_to_OM</a></span><span class="op">(</span><span class="va">OM_GG</span>, <span class="va">Rel_Abun_Area_GG</span><span class="op">)</span></span>
<span></span>
<span><span class="va">OM_BS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Add_Spatial_to_OM.html">Add_Spatial_to_OM</a></span><span class="op">(</span><span class="va">OM_BS</span>, <span class="va">Rel_Abun_Area_BS</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2" number="7">
<h2 id="generate-correlated-recruitment-deviations-for-projections">
<span class="header-section-number">7</span> Generate Correlated Recruitment Deviations for Projections<a class="anchor" aria-label="anchor" href="#generate-correlated-recruitment-deviations-for-projections"></a>
</h2>
<p>A multivariate normal distribution (truncated at 2 standard deviations) was used to estimate the variance and auto-correlation in the estimated recruitment deviations, together with the correlation in recruitment deviations between the three stocks. This distribution was then used to generate recruitment deviations for the projection period, maintaining the statistic properties of the historical recruitment deviations estimated in the stock assessments (Figure <a href="#fig:recdevs">7.1</a>).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">OMList</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Generate_Correlated_Rec_Devs.html">Generate_Correlated_Rec_Devs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">OM_RS</span>, <span class="va">OM_GG</span>, <span class="va">OM_BS</span><span class="op">)</span>, truncsd<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/Generate_Correlated_Rec_Devs.html">Plot_Correlated_Rec_Devs</a></span><span class="op">(</span><span class="va">OMList</span><span class="op">)</span></span>
<span></span>
<span><span class="va">OM_RS</span> <span class="op">&lt;-</span> <span class="va">OMList</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">OM_GG</span> <span class="op">&lt;-</span> <span class="va">OMList</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">OM_BS</span> <span class="op">&lt;-</span> <span class="va">OMList</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<div class="figure">
<span style="display:block;" id="fig:recdevs"></span>
<img src="../reference/figures/rec_devs.png" alt="Scatterplots with marginal distributions showing the correlated recruitment deviations used for the projections."><p class="caption">
Figure 7.1: Scatterplots with marginal distributions showing the correlated recruitment deviations used for the projections.
</p>
</div>
</div>
<div class="section level2" number="8">
<h2 id="compare-bam-and-om-dynamics">
<span class="header-section-number">8</span> Compare BAM and OM Dynamics<a class="anchor" aria-label="anchor" href="#compare-bam-and-om-dynamics"></a>
</h2>
<p>Three single-stock, multi-fleet operating models have now been created. The next thing is to confirm that the fishery dynamics generated by the operating model are sufficiently close to those estimated in the BAM output.</p>
<p>Here the <code>Simulate</code> function is used to simulate the historical fishery dynamics described in the OM, and the
<code>Compare_Biomass</code> function creates a plot to compare the biomass from the OM with those from the BAM output.</p>
<p>The plots show that the biomass generated by the OMs closely matches the biomass reported by the stock assessments. The minor differences between the two are caused by the spatial structure being imposed onto the output of a non-spatial stock assessment.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Hist_RS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://msetool.openmse.com/reference/runMSE.html" class="external-link">Simulate</a></span><span class="op">(</span><span class="va">OM_RS</span>, silent <span class="op">=</span> <span class="cn">TRUE</span>, nsim<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/Compare_Biomass.html">Compare_Biomass</a></span><span class="op">(</span><span class="va">Hist_RS</span>, <span class="va">rdat_RS</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/RS_compare.png"><!-- --></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Hist_GG</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://msetool.openmse.com/reference/runMSE.html" class="external-link">Simulate</a></span><span class="op">(</span><span class="va">OM_GG</span>, silent <span class="op">=</span> <span class="cn">TRUE</span>, nsim<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/Compare_Biomass.html">Compare_Biomass</a></span><span class="op">(</span><span class="va">Hist_GG</span>, <span class="va">rdat_GG</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/GG_compare.png"><!-- --></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Hist_BS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://msetool.openmse.com/reference/runMSE.html" class="external-link">Simulate</a></span><span class="op">(</span><span class="va">OM_BS</span>, silent <span class="op">=</span> <span class="cn">TRUE</span>, nsim<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/Compare_Biomass.html">Compare_Biomass</a></span><span class="op">(</span><span class="va">Hist_BS</span>, <span class="va">rdat_BS</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/BS_compare.png"><!-- --></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adrian Hordyk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
